import { ConnectButton } from '@rainbow-me/rainbowkit';
import type { NextPage } from 'next';
import Head from 'next/head';
import styles from '../styles/Home.module.css';
import { useState } from 'react';
import { useAccount, useBalance, useToken } from 'wagmi';

const Home: NextPage = () => {
    const [token, setToken] = useState("")

    const account = useAccount()

    const getToken = useToken({
        address: token as `0x${string}`
    })

    const tokenBalance = useBalance({
        address: account.address,
        token: getToken.data?.address
    })

    return (
        <div className={styles.container}>
            <Head>
                <title>RainbowKit App</title>
                <meta
                    content="Generated by @rainbow-me/create-rainbowkit"
                    name="description"
                />
                <link href="/favicon.ico" rel="icon" />
            </Head>

            <main className={styles.main}>
                <ConnectButton />
                <input placeholder='token' value={token} onChange={(e) => setToken(e.target.value)} />
                {
                    getToken.data && (
                        <div>
                            <div>{getToken.data.name}</div>
                        </div>
                    )
                }
                {
                    tokenBalance.data && (
                        <div>
                            {tokenBalance.data.formatted}
                        </div>
                    )
                }
            </main>

            <footer className={styles.footer}>
                <a href="https://rainbow.me" rel="noopener noreferrer" target="_blank">
                    Made with ‚ù§Ô∏è by your frens at üåà
                </a>
            </footer>
        </div>
    );
};

export default Home;
